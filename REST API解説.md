
---

### 1. そもそも「API」とは？

まず、REST APIを理解するために「API」そのものを知る必要があります。

**API**とは「**A**pplication **P**rogramming **I**nterface」の略です。これは、ソフトウェアやプログラム、Webサービス同士が情報をやり取りするための**「窓口」や「接点」**のようなものです。

**【例：レストランでの注文】**
あなたがレストランの客席に座っているとします。厨房にはたくさんの料理人がいて、料理を作ることができます。しかし、あなたが直接厨房に入って「この肉を焼いてください」と指示することはできません。

-   **あなた（利用者）**：アプリケーションやプログラム
-   **厨房（機能の提供元）**：他のソフトウェアやWebサービス
-   **ウェイター（API）**：あなたと厨房をつなぐ窓口

あなたは**ウェイター（API）**にメニューを見ながら**注文（リクエスト）**をします。するとウェイターはあなたの注文を厨房に伝え、出来上がった**料理（レスポンス）**をあなたの元へ運んできてくれます。

このように、APIは**「内部の複雑な仕組みを知らなくても、決められた方法でリクエストすれば、欲しい結果を返してくれる窓口」**の役割を果たします。

### 2. 「REST API」とは？

**REST API**は、数あるAPIの設計思想（作り方のルール）の中で、現在最も広く使われているものです。「**REST**（**RE**presentational **S**tate **T**ransfer）」という考え方に基づいて作られたAPIを指します。

特にWebの仕組みである**HTTP**という通信ルールを最大限に活用して、シンプルで分かりやすいやり取りを実現することを目指しています。

---

### 3. RESTの重要な原則

RESTの考え方を理解するために、特に重要な4つの原則を解説します。

#### ① アドレス指定可能性 (Addressability)
すべての情報（リソース）には、**固有の住所**が与えられているべき、という考え方です。この住所のことを**URI**と呼びます。

-   **リソース (Resource)**
    APIを通じて操作したい「情報」や「データ」のことです。例えば、「ユーザー情報」「商品リスト」「ブログ記事」などがリソースにあたります。

-   **URI (Uniform Resource Identifier)**
    インターネット上のリソースを特定するための住所です。URLとほぼ同じ意味で使われることが多いです。
    例えば、以下のようにリソースごとに一意の住所が割り当てられます。
    -   全ユーザーの情報： `https://api.example.com/users`
    -   IDが`123`のユーザー情報： `https://api.example.com/users/123`
    -   IDが`45`のブログ記事： `https://api.example.com/posts/45`

#### ② ステートレス (Stateless)
サーバー側が、クライアントからの過去のリクエスト情報を**一切記憶しない**という原則です。

-   **クライアント (Client)**
    APIにリクエスト（お願い）を送る側のプログラムです。Webブラウザやスマートフォンアプリなどがこれにあたります。
-   **サーバー (Server)**
    リクエストを受け取り、処理を実行してレスポンス（返事）を返す側のコンピュータです。

やり取りが**ステートレス**であるとは、毎回のリクエストが自己完結していることを意味します。例えば、あなたがAPIに「ユーザー情報を更新して」とリクエストする場合、どのユーザーのどの情報をどう更新したいのか、毎回すべての情報を送る必要があります。

**【なぜステートレスが良いのか？】**
サーバーが過去のやり取りを覚えておく必要がないため、**サーバーの構造がシンプル**になります。また、どのサーバーがリクエストを処理しても同じ結果になるため、**システムの規模を拡大しやすい（スケーラビリティが高い）**という大きなメリットがあります。

#### ③ 統一インターフェース (Uniform Interface)
やり取りの方法やルールが**統一されている**べき、という原則です。RESTでは、主に**HTTPメソッド**を使って操作の種類を表現します。

-   **HTTPメソッド**
    リソースに対して「何がしたいか」を伝える動詞のようなものです。主に以下の4つが使われます。

| HTTPメソッド | 動作 | 意味 |
| :--- | :--- | :--- |
| **GET** | **取得** | 既存のリソースを取得する（例：ユーザー一覧を見る） |
| **POST** | **作成** | 新しいリソースを作成する（例：新しいユーザーを登録する） |
| **PUT** | **更新** | 既存のリソースを更新する（例：ユーザーのメールアドレスを変更する） |
| **DELETE** | **削除** | 既存のリソースを削除する（例：ユーザーを退会させる） |

これにより、「`https://api.example.com/users/123` という住所（URI）の情報を、**GET（取得）**する」のように、**「何」を「どうする」か**が非常に明確になります。

#### ④ 接続性 (Connectedness)
あるリソースを取得した際に、そのレスポンスの中に**関連する他のリソースへのリンク（URI）**を含めることができる、という考え方です。

例えば、あるブログ記事（`/posts/45`）の情報を取得した際に、その記事の作成者情報へのリンク（`/users/123`）が含まれている、といった具合です。これにより、APIを辿りながら様々な情報にアクセスできます。

---

### 4. REST APIの具体的なやり取りの流れ

ここでは、架空のユーザー管理API `https://api.example.com` を例に、実際のやり取りを見ていきましょう。

やり取りは常に**「クライアントからのリクエスト」**と**「サーバーからのレスポンス」**のセットで行われます。

#### リクエストの構成要素

クライアントがサーバーに送る「お願い」です。主に以下の要素で構成されます。

-   **エンドポイント (Endpoint)**
    APIにアクセスするための具体的なURIのことです。リソースの住所そのものを指します。
    例： `https://api.example.com/users`

-   **HTTPメソッド**
    `GET`, `POST`, `PUT`, `DELETE` のいずれか。

-   **ヘッダ (Header)**
    リクエストに関する付加情報です。「これから送るデータは**JSON形式**ですよ」といった情報（`Content-Type: application/json`）や、認証のための**APIキー**などが含まれます。

-   **ボディ (Body)**
    サーバーに送りたいデータ本体です。新しいユーザーを作成（POST）したり、既存ユーザーの情報を更新（PUT）したりする際に使います。GETやDELETEでは通常使いません。

#### レスポンスの構成要素

サーバーがクライアントに返す「返事」です。

-   **ステータスコード (Status Code)**
    リクエストが成功したか、失敗したかを示す**3桁の数字**です。これにより、クライアントは処理の結果を瞬時に判断できます。

| コード体系 | 意味 | 具体例 |
| :--- | :--- | :--- |
| **200番台** | **成功** | `200 OK` (成功), `201 Created` (作成成功) |
| **400番台** | **クライアントエラー** | `400 Bad Request` (リクエストが不正), `404 Not Found` (リソースが見つからない) |
| **500番台** | **サーバーエラー** | `500 Internal Server Error` (サーバー内部で問題発生) |

-   **ヘッダ (Header)**
    レスポンスに関する付加情報です。「これから返すデータは**JSON形式**ですよ」といった情報が含まれます。

-   **ボディ (Body)**
    クライアントに返すデータ本体です。通常、**JSON形式**が使われます。

-   **JSON (JavaScript Object Notation) とは？**
    データをやり取りするためによく使われる、軽量なテキストベースのデータ形式です。`{"キー": "値"}` の組み合わせでデータを表現し、人間にもコンピュータにも読みやすいのが特徴です。
    ```json
    {
      "id": 123,
      "name": "山田 太郎",
      "email": "yamada@example.com"
    }
    ```

---

### 5. 実践的な例：ユーザー管理APIを操作してみる

コマンドラインツール**cURL**を使って、APIを実際に操作する例を見てみましょう。cURLは、APIの動作確認で頻繁に使われます。

#### 例1：全ユーザーのリストを取得する (GET)
-   **やりたいこと**: 全ユーザーの情報を取得したい
-   **エンドポイント**: `https://api.example.com/users`
-   **メソッド**: `GET`

```bash
# 「-X GET」は省略可能。cURLはデフォルトでGETリクエストを送るため。
curl -X GET "https://api.example.com/users"
```

**成功した場合のレスポンス (例)**
-   **ステータスコード**: `200 OK`
-   **ボディ**:
    ```json
    [
      { "id": 1, "name": "山田 太郎" },
      { "id": 2, "name": "鈴木 花子" }
    ]
    ```

#### 例2：新しいユーザーを作成する (POST)
-   **やりたいこと**: 新しいユーザー「佐藤 次郎」を登録したい
-   **エンドポイント**: `https://api.example.com/users`
-   **メソッド**: `POST`

```bash
curl -X POST \
  -H "Content-Type: application/json" \
  -d '{"name": "佐藤 次郎", "email": "sato@example.com"}' \
  "https://api.example.com/users"
```
- `-H`: ヘッダ情報を指定。「送るデータはJSON形式です」と伝えています。
- `-d`: ボディに含めるデータを指定。

**成功した場合のレスポンス (例)**
-   **ステータスコード**: `201 Created`
-   **ボディ**:
    ```json
    {
      "id": 3,
      "name": "佐藤 次郎",
      "email": "sato@example.com"
    }
    ```

#### 例3：ユーザー情報を更新する (PUT)
-   **やりたいこと**: IDが`1`のユーザーのメールアドレスを更新したい
-   **エンドポイント**: `https://api.example.com/users/1`
-   **メソッド**: `PUT`

```bash
curl -X PUT \
  -H "Content-Type: application/json" \
  -d '{"name": "山田 太郎", "email": "new-yamada@example.com"}' \
  "https://api.example.com/users/1"
```

**成功した場合のレスポンス (例)**
-   **ステータスコード**: `200 OK`
-   **ボディ**: 更新後の情報が返されることが多い。

#### 例4：ユーザーを削除する (DELETE)
-   **やりたいこと**: IDが`2`のユーザーを削除したい
-   **エンドポイント**: `https://api.example.com/users/2`
-   **メソッド**: `DELETE`

```bash
curl -X DELETE "https://api.example.com/users/2"
```

**成功した場合のレスポンス (例)**
-   **ステータスコード**: `204 No Content`
-   **ボディ**: なし（削除が成功したため、返すコンテンツがないことを示す）

---

### 6. JavaScriptでのコード例 (Fetch API)

WebページでREST APIを利用する際は、JavaScriptの**`fetch`関数**がよく使われます。

```javascript
// ユーザーリストを取得する非同期関数
async function getUsers() {
  try {
    // APIにGETリクエストを送信
    const response = await fetch('https://api.example.com/users');

    // レスポンスが成功でなければエラーを投げる
    if (!response.ok) {
      throw new Error(`HTTPエラー: ${response.status}`);
    }

    // レスポンスのボディをJSONとして解析
    const users = await response.json();
    console.log(users); // 取得したユーザーデータをコンソールに表示

  } catch (error) {
    console.error('データの取得に失敗しました:', error);
  }
}

// 関数を実行
getUsers();
```

---

### 7. REST APIのメリット・デメリット

#### メリット
-   **シンプルで分かりやすい**: HTTPの仕組みをベースにしているため、多くの開発者にとって理解しやすいです。
-   **プラットフォームに非依存**: サーバーがどの言語（Java, Ruby, Pythonなど）で書かれていても、クライアントはどんな言語（JavaScript, Swift, Kotlinなど）からでも利用できます。
-   **高いスケーラビリティ**: ステートレスであるため、サーバーの負荷分散や増設が容易です。
-   **Webとの親和性**: Webの標準技術を利用しているため、ブラウザやWebサーバーとの相性が抜群です。

#### デメリット
-   **データ取得の冗長性**: `GET /users/1` でユーザー情報を取得する際、名前だけが欲しい場合でも、メールアドレスや住所など、すべての情報が返ってきてしまうことがあります。
-   **リクエスト回数の増加**: 欲しい情報を得るために、複数のエンドポイントに何度もリクエストを送る必要がある場合があります。（例：記事一覧を取得後、各記事の作者情報を取得するために再度リクエストを送る）

---

### まとめ

-   **REST API**は、Webの仕組みを利用してプログラム同士がやり取りするための**現代的な「お作法」**です。
-   **「どの情報（URI）を」「どうしたいか（HTTPメソッド）」**という非常にシンプルな構造で成り立っています。
-   クライアントとサーバーが疎結合（お互いにあまり依存しない関係）になるため、**柔軟で拡張性の高いシステム**を構築するのに適しており、今日のWeb開発において不可欠な技術となっています。
